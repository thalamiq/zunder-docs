---
title: 'Batch'
description: 'Execute multiple operations independently'
openapi: 'POST /'
---

## Batch

Execute multiple FHIR operations independently. Unlike transactions, batch operations are not atomic - each operation succeeds or fails independently.

## Endpoint

```
POST /fhir
```

## Request Body

The request body is a `Bundle` with `type` set to `batch`:

```json
{
  "resourceType": "Bundle",
  "type": "batch",
  "entry": [
    {
      "request": {
        "method": "POST",
        "url": "Patient"
      },
      "resource": {
        "resourceType": "Patient",
        "name": [{"family": "Doe", "given": ["John"]}]
      }
    },
    {
      "request": {
        "method": "PUT",
        "url": "Patient/123"
      },
      "resource": {
        "resourceType": "Patient",
        "id": "123",
        "name": [{"family": "Doe", "given": ["Jane"]}]
      }
    },
    {
      "request": {
        "method": "GET",
        "url": "Patient/789"
      }
    }
  ]
}
```

## Request Methods

Each entry in the batch can use different HTTP methods:

- `POST` - Create a new resource
- `PUT` - Update a resource (must include full resource)
- `PATCH` - Patch a resource
- `DELETE` - Delete a resource
- `GET` - Read a resource

## Request URL

The `url` in each request can be:

- **Absolute**: `Patient/123` - References a specific resource
- **Relative**: `Patient` - Creates a new resource of that type
- **Conditional**: `Patient?identifier=http://example.org/mrn|12345` - Conditional operation

## Response

### Success (200 OK)

Returns a `Bundle` with `type` set to `batch-response`:

```json
{
  "resourceType": "Bundle",
  "type": "batch-response",
  "entry": [
    {
      "response": {
        "status": "201",
        "location": "Patient/abc123",
        "etag": "W/\"1\""
      },
      "resource": {
        "resourceType": "Patient",
        "id": "abc123",
        ...
      }
    },
    {
      "response": {
        "status": "200",
        "location": "Patient/123",
        "etag": "W/\"2\""
      },
      "resource": {
        "resourceType": "Patient",
        "id": "123",
        ...
      }
    },
    {
      "response": {
        "status": "404",
        "outcome": {
          "resourceType": "OperationOutcome",
          "issue": [
            {
              "severity": "error",
              "code": "not-found",
              "details": {
                "text": "Resource Patient/789 not found"
              }
            }
          ]
        }
      }
    }
  ]
}
```

## Independent Processing

Unlike transactions, batch operations are processed independently:

- Each operation succeeds or fails on its own
- One failure doesn't affect other operations
- Operations may be processed in parallel (implementation-dependent)
- The response includes results for all operations, including failures

## Error Handling

Failed operations are included in the response with error details:

```json
{
  "response": {
    "status": "400",
    "outcome": {
      "resourceType": "OperationOutcome",
      "issue": [
        {
          "severity": "error",
          "code": "invalid",
          "details": {
            "text": "Resource validation failed"
          }
        }
      ]
    }
  }
}
```

## Response Status Codes

Each entry's response includes a status code:

- `200 OK` - Successful read or update
- `201 Created` - Resource created
- `204 No Content` - Successful delete
- `400 Bad Request` - Invalid request (operation fails, others continue)
- `404 Not Found` - Resource not found (operation fails, others continue)
- `409 Conflict` - Version conflict (operation fails, others continue)

## Use Cases

Use batch operations when:

- You need to process multiple operations but don't need atomicity
- Some operations can fail without affecting others
- You want to reduce the number of HTTP requests
- Operations are independent of each other

Use transactions when:

- Operations must succeed or fail together
- You need atomicity guarantees
- Operations depend on each other
- Data consistency is critical

## Notes

- Batch operations are not atomic - each succeeds or fails independently
- Operations may be processed in any order or in parallel
- The response includes results for all operations
- Failed operations don't prevent successful operations from completing
- Use batch for independent operations, transaction for dependent operations

